---
import Emojie from "../components/Emojie.astro";
import {eras} from "../datas/songs.json"

interface Props {
    era: string
}

const { era } = Astro.props
const eraData = eras.find(e => e.albums === era);

if (!eraData) return null

---
<table transition:name="tarjeta-tabla" class = `bg-${era}-400 rounded-3xl p-2.5 flex flex-col gap-2 gap-y-0 items-start justify-start self-stretch shrink-0 relative overflow-hidden table-auto space-y-2.5`>
    <thead class="w-full flex flex-row gap-2">
        <tr class={`bg-${era}-500 rounded-2xl p-2.5 flex gap-0 items-center justify-center w-full`}>
            <th class:list = {[
                "text-center font-headline-small-font-family text-headline-small-font-size leading-headline-small-line-height font-headline-small-font-weight relative w-full",
                {
                    "text-debut-100": era === "debut",
                    "text-fearless-100": era === "fearless",
                    "text-speakNow-100": era === "speakNow",
                    "text-red-100": era === "red",
                    "text-1989-100": era === "1989",
                    "text-reputation-100": era === "reputation",
                    "text-lover-100": era === "lover",
                    "text-folklore-100": era === "folklore",
                    "text-evermore-100": era === "evermore",
                    "text-midnights-100": era === "midnights",
                    "text-TTPD-100": era === "TTPD",
                }
            ]}>
                Canciones
            </th>
        </tr>
        <tr class={`bg-${era}-500 rounded-2xl p-2.5 flex gap-0 items-center justify-center w-full`}>
            <th class:list = {[
                "text-center font-headline-small-font-family text-headline-small-font-size leading-headline-small-line-height font-headline-small-font-weight relative w-full",
                {
                    "text-debut-100": era === "debut",
                    "text-fearless-100": era === "fearless",
                    "text-speakNow-100": era === "speakNow",
                    "text-red-100": era === "red",
                    "text-1989-100": era === "1989",
                    "text-reputation-100": era === "reputation",
                    "text-lover-100": era === "lover",
                    "text-folklore-100": era === "folklore",
                    "text-evermore-100": era === "evermore",
                    "text-midnights-100": era === "midnights",
                    "text-TTPD-100": era === "TTPD",
                }
            ]}>
                Fechas
            </th>
        </tr>
        <tr class={`bg-${era}-500 rounded-2xl p-2.5 flex gap-0 items-center justify-center w-full`}>
            <th class:list = {[
                "text-center font-headline-small-font-family text-headline-small-font-size leading-headline-small-line-height font-headline-small-font-weight relative w-full",
                {
                    "text-debut-100": era === "debut",
                    "text-fearless-100": era === "fearless",
                    "text-speakNow-100": era === "speakNow",
                    "text-red-100": era === "red",
                    "text-1989-100": era === "1989",
                    "text-reputation-100": era === "reputation",
                    "text-lover-100": era === "lover",
                    "text-folklore-100": era === "folklore",
                    "text-evermore-100": era === "evermore",
                    "text-midnights-100": era === "midnights",
                    "text-TTPD-100": era === "TTPD",
                }
            ]}>
                Lugares
            </th>
        </tr>
    </thead>
    <tbody  class=`text-${era}-800 w-full flex flex-col gap-1 rounded-2xl items-start justify-start self-stretch shrink-0 relative overflow-hidden`>
        <!-- canciones -->
        {
            eraData?.canciones.map(({title , info , etiquetas}) =>{
                    return (
                        <tr class="w-full flex-row gap-2 rounded-2xl p-2.5 flex items-center justify-center" 
                        class:list = {[
                            {
                                "bg-debut-200": era === "debut",
                                "bg-fearless-200": era === "fearless",
                                "bg-speakNow-200": era === "speakNow",
                                "bg-red-200": era === "red",
                                "bg-1989-200": era === "1989",
                                "bg-reputation-200": era === "reputation",
                                "bg-lover-200": era === "lover",
                                "bg-folklore-200": era === "folklore",
                                "bg-evermore-200": era === "evermore",
                                "bg-midnights-200": era === "midnights",
                                "bg-TTPD-200": era === "TTPD",
                            }
                        ]}>
                            <td class=" w-full rounded-2xl relative">
                                <p class="font-title-medium-font-family text-title-medium-font-size leading-title-medium-line-height font-title-medium-font-weight text-center">
                                    {title}
                                </p>
                            </td>
                            <td class="flex flex-col w-full" class:list={[{'hidden': etiquetas.principal === "setlist" || etiquetas.principal === 'sinCantar'}]}>
                                {
                                    info.map(({fecha , instrumento })=>{
                                        if (!instrumento) return null
                                        return(
                                            <div class="flex flex-row gap-3 justify-center" >
                                                <p class="font-title-medium-font-family text-title-medium-font-size leading-title-medium-line-height font-title-medium-font-weight">
                                                    {fecha.dia}/{fecha.mes}/{fecha.año}
                                                </p>
                                                <Emojie emojie={instrumento}/>
                                            </div>
                                            
                                        )
                                    }
                                    )
                                }
                            </td>
                            <td class="flex-col w-full" class:list={[{'hidden': etiquetas.principal === "setlist" || etiquetas.principal === 'sinCantar'}]}>
                                {
                                    info.map(({lugar})=>{
                                        return(
                                            <p class="font-title-medium-font-family text-title-medium-font-size leading-title-medium-line-height font-title-medium-font-weight text-center">{lugar}</p>
                                        )
                                    }

                                    )
                                }
                            </td>
                        </tr>
                    )
                }
            
            )
        }
        <!-- divisor -->
        {
            eraData?.extras.length > 0 && 
            <tr class="w-full flex-row gap-2 rounded-2xl p-0.5 flex items-center justify-center" 
            class:list = {[
                {
                    "bg-debut-600": era === "debut",
                    "bg-fearless-600": era === "fearless",
                    "bg-speakNow-600": era === "speakNow",
                    "bg-red-600": era === "red",
                    "bg-1989-600": era === "1989",
                    "bg-reputation-600": era === "reputation",
                    "bg-lover-600": era === "lover",
                    "bg-folklore-600": era === "folklore",
                    "bg-evermore-600": era === "evermore",
                    "bg-midnights-600": era === "midnights",
                    "bg-TTPD-600": era === "TTPD",
                }
            ]}>
            </tr>
        }
        {
            eraData?.extras.map(({title , info }) =>{
                    return (
                        <tr class="w-full flex-row gap-2 rounded-2xl p-2.5 flex items-center justify-center" 
                        class:list = {[
                            {
                                "bg-debut-200": era === "debut",
                                "bg-fearless-200": era === "fearless",
                                "bg-speakNow-200": era === "speakNow",
                                "bg-red-200": era === "red",
                                "bg-1989-200": era === "1989",
                                "bg-reputation-200": era === "reputation",
                                "bg-lover-200": era === "lover",
                                "bg-folklore-200": era === "folklore",
                                "bg-evermore-200": era === "evermore",
                                "bg-midnights-200": era === "midnights",
                                "bg-TTPD-200": era === "TTPD",
                            }
                        ]}>
                            <td class=" w-full rounded-2xl relative">
                                <p class="font-title-medium-font-family text-title-medium-font-size leading-title-medium-line-height font-title-medium-font-weight text-center">
                                    {title}
                                </p>
                            </td>
                            <td class="flex flex-col w-full">
                                {
                                    info.map(({fecha , instrumento })=>{
                                        if (!instrumento) return null
                                        return(
                                            <div class="flex flex-row gap-3 justify-center">
                                                <p class="font-title-medium-font-family text-title-medium-font-size leading-title-medium-line-height font-title-medium-font-weight">
                                                    {fecha.dia}/{fecha.mes}/{fecha.año}
                                                </p>
                                                <Emojie emojie={instrumento}/>
                                            </div>
                                            
                                        )
                                    }
                                    )
                                }
                            </td>
                            <td class="flex-col w-full">
                                {
                                    info.map(({lugar})=>{
                                        return(
                                            <p class="font-title-medium-font-family text-title-medium-font-size leading-title-medium-line-height font-title-medium-font-weight text-center">{lugar}</p>
                                        )
                                    }

                                    )
                                }
                            </td>
                        </tr>
                    )
                }
            
            )
        }
    </tbody>
</table>